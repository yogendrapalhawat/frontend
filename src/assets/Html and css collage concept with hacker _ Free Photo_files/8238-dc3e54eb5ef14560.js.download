!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="d6383d70-b67c-4df6-97ae-311d562e155b",e._sentryDebugIdIdentifier="sentry-dbid-d6383d70-b67c-4df6-97ae-311d562e155b")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8238],{78238:function(e,s,t){"use strict";t.d(s,{L:function(){return G}});var r=t(97458),a=t(10893),l=t(6418),c=t(33523);let n=()=>{let e=Array.from({length:5},(e,s)=>s);return(0,r.jsx)("div",{className:"flex flex-col gap-1 sm:h-60",children:e.map(e=>(0,r.jsx)("div",{children:(0,r.jsx)(c.O.Rect,{className:"h-10"})},e))})},i=()=>{let{t:e}=(0,a.$G)("detailCommon");return(0,r.jsx)("div",{className:"text-center text-sm text-surface-foreground-1 sm:h-60",children:(0,r.jsx)("p",{children:e("noMatchingCollections")})})};var o=t(770),d=t(74447),u=t(57291),x=t(7616),f=t(52983),m=t(94498),h=t(99),v=t(39246),j=t(46914),g=t(90368),p=t(87908),b=t(14417),w=t(3506),N=t(98821),C=t.n(N),y=t(88659);let z=e=>{let{preview:s,isFavourite:t,name:a}=e,l=(0,v.a)("smMax");return t?(0,r.jsx)("div",{className:"flex size-10 items-center justify-center rounded bg-surface-accent-1 sm:size-8",children:(0,r.jsx)(o.J,{as:g.Z,className:"text-surface-accent-0",size:"sm"})}):s?(0,r.jsx)(C(),{className:"rounded bg-surface-2 object-cover",src:s,alt:a,width:l?40:32,height:l?40:32}):(0,r.jsx)("div",{className:"flex size-10 items-center justify-center rounded bg-surface-2 sm:size-8",children:(0,r.jsx)(o.J,{as:p.Z,className:"text-surface-foreground-3",size:"sm"})})},k=(0,u.j)("flex size-8 cursor-pointer items-center justify-center rounded transition-opacity",{variants:{isRemoveButton:{true:"",false:"bg-secondary-0"}}}),_=e=>{let{isAdded:s,hovered:t,onRemove:a}=e;return((0,v.a)("smMax")||t)&&s?(0,r.jsx)("div",{className:k({isRemoveButton:!0}),onClick:a,children:(0,r.jsx)(o.J,{as:w.Z,className:"text-surface-foreground-0",size:"sm"})}):t?(0,r.jsx)("div",{className:k({isRemoveButton:!1}),children:(0,r.jsx)(o.J,{as:b.Z,className:"text-surface-0",size:"sm"})}):s&&(0,r.jsx)(o.J,{as:j.Z,className:"mr-2 text-surface-foreground-0",size:"sm"})},Z=e=>{var s;let{isFavourite:t=!1,collection:a}=e,{handleAddToCollection:l,handleRemoveFromCollection:c,loading:n}=(0,y.r)(),i=null!==(s=a.hasResourceInCollection)&&void 0!==s&&s,o=(0,v.a)("smMax"),[d,x]=(0,f.useState)(!1);return(0,r.jsxs)("button",{className:(0,u.cx)("flex w-full items-center justify-between rounded-lg p-1 hover:bg-surface-2",i?"cursor-default":"cursor-pointer"),onMouseEnter:()=>!o&&x(!0),onMouseLeave:()=>!o&&x(!1),onClick:()=>{i||l(a.id,a.name)},disabled:n,children:[(0,r.jsxs)("div",{className:"flex w-[calc(100%-32px)] items-center gap-2",children:[(0,r.jsx)(z,{preview:a.preview,isFavourite:t,name:a.name}),(0,r.jsx)("span",{className:"max-w-[calc(100%-32px)] truncate text-sm font-semibold text-surface-foreground-2",title:a.name,children:a.name})]}),(0,r.jsx)(_,{isAdded:i,hovered:d,onRemove:()=>{c(a.id)}})]})};var M=t(32470),J=t.n(M);let R=e=>{let{collections:s}=e;if(!s||0===s.length)return(0,r.jsx)(i,{});let t=s.find(e=>"Favorites"===e.name),a=s.filter(e=>!e.preview),l=s.filter(e=>"Favorites"!==e.name&&e.preview);return(0,r.jsxs)("div",{className:(0,u.cx)(J().scrollbar,"h-[calc(100%-170px)] overflow-y-auto sm:h-60"),children:[t&&(0,r.jsx)(Z,{isFavourite:!0,collection:t}),[...l,...a].map(e=>(0,r.jsx)(Z,{collection:e},e.id))]})},B=e=>{let{userCollectionsResult:s}=e,{t}=(0,a.$G)("detailCommon"),[l,c]=(0,f.useState)(""),n=(0,f.useRef)(null),[i,v]=(0,f.useState)(!1),j=(0,x.b9)(m.HQ),g=(0,x.Dv)(m.GD),{data:p}=s,b=p.filter(e=>"owned"===e.ownership).filter(e=>e.name.toLowerCase().includes(l.toLowerCase()));return(0,f.useEffect)(()=>{""===g&&j(s)},[g,j,s]),(0,r.jsxs)(r.Fragment,{children:[!!s.data.length&&(0,r.jsxs)("div",{className:(0,u.cx)("flex items-center gap-2 rounded-full border cursor-text px-3 py-1",i?"border-primary-0":"border-surface-border-2"),onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()},children:[(0,r.jsx)(o.J,{as:d.Z,className:"text-surface-foreground-3",size:"sm"}),(0,r.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:t("detailCommon:searchCollections"),className:"w-full border-transparent bg-surface-0 text-xs font-normal text-surface-foreground-3 focus:outline-none dark:bg-surface-1",onFocus:()=>v(!0),onBlur:()=>v(!1),ref:n})]}),(0,r.jsx)("span",{className:"text-xs text-surface-foreground-3",children:t("selectACollection")}),(0,r.jsx)(R,{collections:b.map(h.V)})]})},E=e=>{let{id:s}=e,t=(0,l.lL)({page:1,resourceId:s});return t.isError?(0,r.jsx)(i,{}):t.isPending?(0,r.jsx)(n,{}):t.isSuccess?(0,r.jsx)(B,{userCollectionsResult:t.data}):(0,r.jsx)(n,{})};var I=t(39597),L=t(96065),D=t(19170),S=t(89310);let F=()=>{let{openToast:e}=(0,D.x_)(),{handleAddToCollection:s}=(0,y.r)();return{handleCreate:(0,f.useCallback)(async t=>{if(0===t.length)return;let r=await (0,S.B)({name:t,description:"",type:"private"});r.success?s(r.data.id,t):e()},[s,e])}},H=()=>{let[e,s]=(0,f.useState)(""),[t,l]=(0,f.useState)(!1),{t:c}=(0,a.$G)("detailCommon"),{handleCreate:n}=F(),i=(0,f.useRef)(null),d=()=>{n(e),s(""),l(!1)};return((0,f.useEffect)(()=>{if(t){var e;null===(e=i.current)||void 0===e||e.focus()}},[t]),t)?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(I.I,{type:"text",className:"h-8 w-full sm:w-[152px]",placeholder:c("name"),value:e,onChange:e=>{s(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&d()},ref:i}),(0,r.jsx)("button",{className:"size-8 min-w-8 rounded-sm hover:bg-surface-2",onClick:d,disabled:!e,children:(0,r.jsx)(o.J,{as:j.Z,size:"sm",className:"text-surface-border-10"})}),(0,r.jsx)("button",{className:"size-8 min-w-8 rounded-sm hover:bg-surface-2",onClick:()=>l(!1),children:(0,r.jsx)(o.J,{as:L.Z,size:"sm",className:"text-surface-border-10"})})]}):(0,r.jsxs)("button",{className:"flex w-full items-center gap-2",onClick:()=>l(!0),children:[(0,r.jsx)("div",{className:"flex size-8 items-center justify-center rounded bg-surface-2",children:(0,r.jsx)(o.J,{as:b.Z,size:"sm",className:"text-surface-foreground-0"})}),(0,r.jsx)("span",{className:"text-sm font-semibold text-surface-foreground-2",children:c("newCollection")})]})},G=e=>{let{type:s,id:t}=e,{t:l}=(0,a.$G)("detailCommon");return(0,r.jsxs)("div",{className:"flex size-full flex-col justify-between gap-3 bg-surface-0 p-4 xs:justify-start sm:h-auto sm:w-64 sm:rounded-lg sm:shadow-xs dark:bg-surface-1",children:[(0,r.jsxs)("div",{className:"flex h-full flex-col gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-surface-foreground-2",children:l("saveToCollection")}),(0,r.jsx)(E,{id:t,type:s})]}),(0,r.jsxs)("div",{className:"fixed bottom-0 w-[calc(100%-34px)] bg-surface-0 pb-4 pt-2 sm:relative sm:w-auto sm:p-0 dark:bg-surface-1",children:[(0,r.jsx)("div",{className:"mb-3 h-px w-full bg-surface-border-2"}),(0,r.jsx)(H,{})]})]})}},89310:function(e,s,t){"use strict";t.d(s,{B:function(){return a}});var r=t(63202);let a=e=>{let{name:s,description:t,type:a}=e;return(0,r.c)("/api/user/collections","POST",{name:s,...t&&{description:t},...a&&{type:a}})}},90368:function(e,s,t){"use strict";var r=t(97458);s.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"})})},3506:function(e,s,t){"use strict";var r=t(97458);s.Z=e=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,r.jsx)("path",{d:"M428 231.5H317v-65c0-13.807-11.193-25-25-25H122c-13.807 0-25 11.193-25 25v65H-14c-13.807 0-25 11.193-25 25s11.193 25 25 25h25v306c0 35.841 29.159 65 65 65h262c35.841 0 65-29.159 65-65v-306h25c13.807 0 25-11.193 25-25s-11.193-25-25-25m-281-40h120v40H147zm206 396c0 8.271-6.729 15-15 15H76c-8.271 0-15-6.729-15-15v-306h292z"}),(0,r.jsx)("path",{d:"M150 341.5c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25m114 0c-13.807 0-25 11.193-25 25v151c0 13.807 11.193 25 25 25s25-11.193 25-25v-151c0-13.807-11.193-25-25-25"})]})},32470:function(e){e.exports={scrollbar:"listCollections_scrollbar__CCWxo"}}}]);